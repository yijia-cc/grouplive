schema {
    query: Query
    mutation: Mutation
    subscription: Subscription
}

type Query {
    """
    Revise API to utilize graphql nest & nested parameters
    https://graphql.org/learn/schema/#arguments
    """
    amenityTypes: [AmenityType!]!
    amenityType(id: ID!): AmenityType!
    myCalendar(weekStart: Time!): Schedule!
    reservations: [Reservation!]!
}

type Mutation {
    makeReservation(reservation: ReservationInput!): Reservation!
    confirmReservation(id: ID!): Void
    cancelReservation(id: ID!): Void
    updateReservation(reservation: ReservationInput!): Reservation!

    addAmenityType(amenityType: AmenityTypeInput!): Void
    deleteAmenityType(id: ID!): Void
    updateAmenityType(amenityType: AmenityTypeInput!): Void

    addAmenity(amenity: AmenityInput!): Void
    deleteAmenity(id: ID!): Void
    updateAmenity(amenity: AmenityInput!): Void
}

type Subscription {
    scheduleUpdateSubscribe(input: ScheduleUpdateSubscribeInput!): Void
}

input ScheduleUpdateSubscribeInput {
    amenityId: ID!
    weekStart: Time!
}

input ReservationInput {
    reservationId: ID
    amenityId: ID!
    timeRange: TimeRangeInput!
}

input AmenityTypeInput {
    id: ID
    title: String
    description: String
    thumbnailUrl: String
}

input AmenityInput {
    id: ID
    name: String
    type: AmenityTypeInput!
    operationalHours: [TimeRangeInput!]!
}

input TimeRangeInput  {
    start: Time!
    end: Time!
}

type AmenityType {
    id: ID!
    title: String
    description: String
    thumbnailUrl: String

    amenityInfoList: [AmenityInfo!]!
}

type AmenityInfo {
    id: ID!
    name: String
    amenityTypeId: ID!
}

type Reservation {
    id: ID!
    amenity: Amenity!
    holdDuration: Duration
    timeSlot: TimeSlot!
    status: ReservationStatus!
}

type Amenity {
    id: ID!
    name: String
    type: AmenityType!
    schedule(weekStart: Time): Schedule
    operationalHours: [TimeRange!]!
}

type Schedule {
    id: ID!
    weekStart: Time!
    previous: Schedule
    next: Schedule
    reservations: [Reservation!]!
    timeSlots: [TimeSlot!]!
}

type TimeSlot {
    type: TimeSlotType!
    timeRange: TimeRange!
}

type TimeRange {
    start: Time!
    end: Time!
}

enum ReservationStatus {
    UPCOMING
    ONGOING
    PAST
}

enum TimeSlotType {
    AVAILABLE
    BOOKED_BY_OTHERS
    BOOKED_BY_ME
}

scalar Time
scalar Duration
scalar Void
